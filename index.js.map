{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = async (searchedValue, page) => {\n  const axiosOptions = {\n    params: {\n        key: '45491471-a9703abbe87dc4841cd0b555c',\n        q: searchedValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n      }\n    }\n  return await axios.get('/api/',axiosOptions);\n};","import SimpleLightbox from 'simplelightbox';\nexport const createMarkup = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n    <a class=\"gallery_link\" href =\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" title=\"${imgInfo.tags}\"/>\n    <ul class =\"image-details\">\n    <p>Likes<span>${imgInfo.likes}</span></p>\n    <p>Views<span>${imgInfo.views}</span></p>\n    <p>Commets<span>${imgInfo.comments}</span></p>\n    <p>Downloads<span>${imgInfo.downloads}</span></p>\n    </ul>\n    </a>\n  </li>\n  `;\n};\n\nexport const lightbox = new SimpleLightbox('.js-gallery a', {\n   animationSpeed: 250\n          });","import iziToast from \"izitoast\";\nimport { fetchPhotos } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\nimport { lightbox } from \"./js/render-functions\";\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryList = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nconst formReset = () => searchFormEl.reset();\nconst loaderShow = () => {\n  loader.classList.remove('is-hidden');\n}\n\nlet currentPage = 1;\nlet searchedValue = '';\nlet cardHeight = 0;\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  searchedValue = searchFormEl.elements.user_query.value;\n  if (searchedValue === \"\") {\n      iziToast.warning({\n      message: 'Please, enter your request in the field!',\n      position: 'topRight',\n    })\n    return;\n  }\n  loaderShow();\n  \n\n  currentPage = 1;\n  \n  const responce = await fetchPhotos(searchedValue, currentPage);\n\n  try {\n    if (responce.data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      galleryList.innerHTML = '';\n      formReset();\n\n      return;\n    }\n    \n    galleryList.innerHTML = '';\n    const galleryCreateMarkup = responce.data.hits.map(imgDetails => createMarkup(imgDetails)).join('');\n\n    galleryList.insertAdjacentHTML(\"beforeend\", galleryCreateMarkup);\n    formReset();\n    lightbox.refresh();\n\n    const galleryCardEl = galleryList.querySelector('li');\n\n    cardHeight = galleryCardEl.getBoundingClientRect().height;\n\n    loadMoreBtnEl.classList.remove('is-hidden');\n    if (Math.ceil(responce.data.totalHits / 15) === currentPage) {\n      iziToast.info({\n        message: 'It`s all images for your request!',\n        position: 'topRight',\n      })\n      loadMoreBtnEl.classList.add('is-hidden');\n    }\n\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      message: 'Sorry, something get wrong. Try again later!',\n      position: 'topRight',\n    });\n  }\n  loader.classList.add('is-hidden');\n\n};\n\nconst onLoadMoreBtnClick = async event => {\n  const responce = await fetchPhotos(searchedValue, currentPage);\n  try {\n    currentPage++;\n\n    const galleryCreateMarkup = responce.data.hits.map(imgDetails => createMarkup(imgDetails)).join('');\n\n    galleryList.insertAdjacentHTML(\"beforeend\", galleryCreateMarkup);\n    lightbox.refresh();\n\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    if (Math.ceil(responce.data.totalHits / 15) === currentPage) {\n      iziToast.info({\n        message: 'It`s all images for your request!',\n        position: 'topRight',\n      })\n      loadMoreBtnEl.classList.add('is-hidden');\n    }\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      message: 'Sorry, something get wrong. Try again later!',\n      position: 'topRight',\n    });\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["axios","fetchPhotos","searchedValue","page","axiosOptions","createMarkup","imgInfo","lightbox","SimpleLightbox","searchFormEl","galleryList","loader","loadMoreBtnEl","formReset","loaderShow","currentPage","cardHeight","onSearchFormSubmit","event","iziToast","responce","galleryCreateMarkup","imgDetails","err","onLoadMoreBtnClick"],"mappings":"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"}