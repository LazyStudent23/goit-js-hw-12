{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = (searchedValue, page) => {\n  const axiosOptions = {\n    params: {\n        key: '45491471-a9703abbe87dc4841cd0b555c',\n        q: searchedValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n      }\n    }\n  return axios.get('/api/',axiosOptions);\n};","import SimpleLightbox from 'simplelightbox';\nexport const createMarkup = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n    <a class=\"gallery_link\" href =\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" title=\"${imgInfo.tags}\"/>\n    <ul class =\"image-details\">\n    <p>Likes<span>${imgInfo.likes}</span></p>\n    <p>Views<span>${imgInfo.views}</span></p>\n    <p>Commets<span>${imgInfo.comments}</span></p>\n    <p>Downloads<span>${imgInfo.downloads}</span></p>\n    </ul>\n    </a>\n  </li>\n  `;\n};\n\nexport const lightbox = new SimpleLightbox('.js-gallery a', {\n   animationSpeed: 250\n          });","import iziToast from \"izitoast\";\nimport { fetchPhotos } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\nimport { lightbox } from \"./js/render-functions\";\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryList = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nconst formReset = () => searchFormEl.reset();\nconst loaderShow = () => {\n    loader.classList.remove('is-hidden');\n}\n\nlet currentPage = 1;\nlet searchedValue = '';\nlet cardHeight = 0;\n\nconst onSearchFormSubmit = async event => {\n    event.preventDefault();\n    loaderShow();\n  searchedValue = searchFormEl.elements.user_query.value;\n\n  currentPage = 32;\n\n  const responce = await fetchPhotos(searchedValue, currentPage);\n\n  try {\n    if (responce.data.hits.length === 0) {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n\n        galleryList.innerHTML = '';\n          formReset();\n\n        return;\n    }\n    \n          galleryList.innerHTML = '';\n      const galleryCreateMarkup = responce.data.hits.map(imgDetails => createMarkup(imgDetails)).join('');\n\n          galleryList.insertAdjacentHTML(\"beforeend\", galleryCreateMarkup);\n          formReset();\n    lightbox.refresh();\n\n    const galleryCardEl = galleryList.querySelector('li');\n\n    cardHeight = galleryCardEl.getBoundingClientRect().height;\n     \n    loadMoreBtnEl.classList.remove('is-hidden');\n    if (Math.ceil(responce.data.totalHits / 15) === currentPage) {\n      iziToast.info({\n        message: 'It`s all images for your request!',\n        position: 'topRight',\n      })\n      loadMoreBtnEl.classList.add('is-hidden');\n    }\n\n  } catch (err) {\n    console.log(err);\n      iziToast.error({\n        message: 'Sorry, something get wrong. Try again later!',\n        position: 'topRight',\n      });\n    }\n      loader.classList.add('is-hidden');\n    \n};\n\nconst onLoadMoreBtnClick = async event => {\n  const responce = await fetchPhotos(searchedValue, currentPage);\n  try {\n    currentPage += 1;\n\n    const galleryCreateMarkup = responce.data.hits.map(imgDetails => createMarkup(imgDetails)).join('');\n\n          galleryList.insertAdjacentHTML(\"beforeend\", galleryCreateMarkup);\n\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n   if (Math.ceil(responce.data.totalHits / 15) === currentPage) {\n      iziToast.info({\n        message: 'It`s all images for your request!',\n        position: 'topRight',\n      })\n      loadMoreBtnEl.classList.add('is-hidden');\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["axios","fetchPhotos","searchedValue","page","axiosOptions","createMarkup","imgInfo","lightbox","SimpleLightbox","searchFormEl","galleryList","loader","loadMoreBtnEl","formReset","loaderShow","currentPage","cardHeight","onSearchFormSubmit","event","responce","iziToast","galleryCreateMarkup","imgDetails","err","onLoadMoreBtnClick"],"mappings":"owBACAA,EAAM,SAAS,QAAU,sBAElB,MAAMC,EAAc,CAACC,EAAeC,IAAS,CAClD,MAAMC,EAAe,CACnB,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACf,WAAY,GACZ,KAAMC,EACN,SAAU,EACT,CACF,EACH,OAAOH,EAAM,IAAI,QAAQI,CAAY,CACvC,ECfaC,EAAeC,GACnB;AAAA;AAAA,qCAE4BA,EAAQ,aAAa;AAAA,oCACtBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI,YAAYA,EAAQ,IAAI;AAAA;AAAA,oBAElFA,EAAQ,KAAK;AAAA,oBACbA,EAAQ,KAAK;AAAA,sBACXA,EAAQ,QAAQ;AAAA,wBACdA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,IAO5BC,EAAW,IAAIC,EAAe,gBAAiB,CACzD,eAAgB,GACnB,CAAW,ECdLC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAgB,SAAS,cAAc,eAAe,EAEtDC,EAAY,IAAMJ,EAAa,QAC/BK,EAAa,IAAM,CACrBH,EAAO,UAAU,OAAO,WAAW,CACvC,EAEA,IAAII,EAAc,EACdb,EAAgB,GAChBc,EAAa,EAEjB,MAAMC,EAAqB,MAAMC,GAAS,CACtCA,EAAM,eAAc,EACpBJ,IACFZ,EAAgBO,EAAa,SAAS,WAAW,MAEjDM,EAAc,GAEd,MAAMI,EAAW,MAAMlB,EAAYC,EAAea,CAAW,EAE7D,GAAI,CACF,GAAII,EAAS,KAAK,KAAK,SAAW,EAAG,CACjCC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UACpB,CAAS,EAEDV,EAAY,UAAY,GACtBG,IAEF,MACH,CAEKH,EAAY,UAAY,GAC5B,MAAMW,EAAsBF,EAAS,KAAK,KAAK,IAAIG,GAAcjB,EAAaiB,CAAU,CAAC,EAAE,KAAK,EAAE,EAE9FZ,EAAY,mBAAmB,YAAaW,CAAmB,EAC/DR,IACNN,EAAS,QAAO,EAIhBS,EAFsBN,EAAY,cAAc,IAAI,EAEzB,sBAAuB,EAAC,OAEnDE,EAAc,UAAU,OAAO,WAAW,EACtC,KAAK,KAAKO,EAAS,KAAK,UAAY,EAAE,IAAMJ,IAC9CK,EAAS,KAAK,CACZ,QAAS,oCACT,SAAU,UAClB,CAAO,EACDR,EAAc,UAAU,IAAI,WAAW,EAG1C,OAAQW,EAAK,CACZ,QAAQ,IAAIA,CAAG,EACbH,EAAS,MAAM,CACb,QAAS,+CACT,SAAU,UAClB,CAAO,CACF,CACCT,EAAO,UAAU,IAAI,WAAW,CAEtC,EAEMa,EAAqB,MAAMN,GAAS,CACxC,MAAMC,EAAW,MAAMlB,EAAYC,EAAea,CAAW,EAC7D,GAAI,CACFA,GAAe,EAEf,MAAMM,EAAsBF,EAAS,KAAK,KAAK,IAAIG,GAAcjB,EAAaiB,CAAU,CAAC,EAAE,KAAK,EAAE,EAE5FZ,EAAY,mBAAmB,YAAaW,CAAmB,EAErE,SAAS,CACP,IAAKL,EAAa,EAClB,SAAU,QAChB,CAAK,EACE,KAAK,KAAKG,EAAS,KAAK,UAAY,EAAE,IAAMJ,IAC7CK,EAAS,KAAK,CACZ,QAAS,oCACT,SAAU,UAClB,CAAO,EACDR,EAAc,UAAU,IAAI,WAAW,EAE1C,OAAQW,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEAd,EAAa,iBAAiB,SAAUQ,CAAkB,EAC1DL,EAAc,iBAAiB,QAASY,CAAkB"}